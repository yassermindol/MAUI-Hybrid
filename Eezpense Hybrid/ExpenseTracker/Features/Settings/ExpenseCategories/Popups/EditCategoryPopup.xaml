<?xml version="1.0" encoding="utf-8" ?>
<mopups:PopupPage
    x:Class="ExpenseTracker.Features.Settings.ExpenseCategories.EditCategoryPopup"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:converters="clr-namespace:ExpenseTracker.Converters"
    xmlns:mopups="clr-namespace:Mopups.Pages;assembly=Mopups">

    <ContentPage.Resources>
        <ResourceDictionary>
            <converters:InvertBooleanConverter x:Key="InvertBooleanConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>

    <Frame CornerRadius="25" VerticalOptions="End">
        <StackLayout Orientation="Vertical" VerticalOptions="End">
            <Label
                Margin="0,15,0,20"
                FontAttributes="Bold"
                FontSize="18"
                HorizontalTextAlignment="Start"
                Text="Edit Expense Category" />

            <Label Margin="0,10,0,10">
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="Name: " />
                        <Span Text="{Binding CategoryName}" />
                    </FormattedString>
                </Label.FormattedText>
            </Label>
            <StackLayout Margin="10,0,20,15" Orientation="Horizontal">
                <Entry
                    FontSize="17"
                    HorizontalOptions="FillAndExpand"
                    HorizontalTextAlignment="Center"
                    Placeholder="New name"
                    Text="{Binding NewCategoryName}" />
                <Image
                    HeightRequest="22"
                    HorizontalOptions="End"
                    Source="{AppThemeBinding Light=ic_undo,
                                             Dark=ic_undo_white}">
                    <Image.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding UndoCommand}" NumberOfTapsRequired="1" />
                    </Image.GestureRecognizers>
                </Image>
            </StackLayout>
            <Button
                Margin="0,25,0,0"
                Command="{Binding SaveCommand}"
                Style="{StaticResource ButtonStyle}"
                Text="Save"
                VerticalOptions="End" />
            <Label
                Margin="0,30,20,15"
                FontSize="16"
                HorizontalTextAlignment="End"
                IsVisible="{Binding IsBusy, Converter={StaticResource InvertBooleanConverter}}"
                Text="Cancel"
                TextDecorations="Underline">
                <Label.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding CancelCommand}" NumberOfTapsRequired="1" />
                </Label.GestureRecognizers>
            </Label>
        </StackLayout>
    </Frame>
</mopups:PopupPage>